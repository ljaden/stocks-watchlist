var H=Object.defineProperty,q=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var L=(a,r,t)=>r in a?H(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t,S=(a,r)=>{for(var t in r||(r={}))U.call(r,t)&&L(a,t,r[t]);if(N)for(var t of N(r))X.call(r,t)&&L(a,t,r[t]);return a},b=(a,r)=>q(a,K(r));import{a as Z,r as d,j as e,G as l,A as J,M as Q,u as V,b as c,T as y,C as j,D as ee,c as B,d as O,e as T,f as te,I as R,g as re,h as P,B as f,i as ne,k as oe,l as ae,F as g,m as se,n as ie,o as W,_ as ce,p as le,q as de,s as $,K as A,t as E,v as F,w as ue,H as he,R as me,x as z,y as pe,z as fe}from"./vendor.e5466ab2.js";const ge=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))u(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&u(s)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function u(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}};ge();const xe="cdp8iqaad3ifj5m9iv4gcdp8iqaad3ifj5m9iv50";var x=Z.create({baseURL:"https://finnhub.io/api/v1/",params:{token:xe}});const w=d.exports.createContext(),ye=a=>{var i,s;const[r,t]=d.exports.useState((s=(i=localStorage.getItem("stockList"))==null?void 0:i.split(","))!=null?s:["META","AMZN","NFLX","GOOGL"]);d.exports.useEffect(()=>{localStorage.setItem("stockList",r)},[r]);const u=o=>{r.indexOf(o)===-1&&t([...r,o])},n=o=>{t(r.filter(h=>h!==o))};return e(w.Provider,{value:{stockList:r,addStock:u,removeStock:n},children:a.children})},ve=()=>{const{addStock:a}=d.exports.useContext(w),[r,t]=d.exports.useState(""),[u,n]=d.exports.useState([]),i=s=>{t(s.currentTarget.value)};return d.exports.useEffect(()=>{let s=!0;const o=async()=>{try{const{data:h}=await x.get("search",{params:{q:r}}),m=h.result.filter(p=>(p.type==="Common Stock"||p.type==="ETP")&&!p.symbol.includes("."));s&&n(m)}catch(h){console.log(h)}};return r.length>1&&r.length<8?o():n([]),()=>s=!1},[r]),e(l,{container:!0,spacing:0,alignItems:"center",justifyContent:"center",children:e(J,{sx:{width:500},freeSolo:!0,value:r,autoHighlight:!0,autoComplete:!0,disableClearable:!0,options:u.map(s=>`${s.description} (${s.symbol})`),filterOptions:s=>s,renderInput:s=>e(Q,b(S({},s),{label:"Search Stock",InputProps:b(S({},s.InputProps),{type:"search"}),onChange:i})),onChange:(s,o)=>{if(o&&s.keyCode===13){const h=o.split("(")[1].split(")")[0];console.log(h,"add stock symbol to StockList State in Watchlist"),a(h),t(""),n([])}}})})},Ce=()=>{const{stockList:a,removeStock:r}=d.exports.useContext(w),[t,u]=d.exports.useState([]),n=V(),i=o=>{n(`detail/${o}`)};return d.exports.useEffect(()=>{let o=!0;return(async()=>{try{const m=await Promise.all(a.map(async p=>{const{data:v}=await x.get("quote",{params:{symbol:p}});return S({symbol:p},v)}));o&&u(m)}catch(m){console.log(m)}})(),()=>o=!1},[a]),c("div",{children:[e(y,{variant:"h3",align:"center",sx:{my:5},children:"WatchList"}),e(j,{maxWidth:"md",children:e(ee,{autoHeight:!0,disableColumnMenu:!0,disableSelectionOnClick:!0,onRowDoubleClick:o=>{i(o.id)},rows:t,columns:[{field:"symbol",headerName:"Symbol",renderCell:o=>c(l,{container:!0,spacing:3,justifyContent:"flex-start",alignItems:"center",children:[e(l,{item:!0,xs:4,children:e(B,{alt:`${o.value}-logo`,src:`https://financialmodelingprep.com/image-stock/${o.value}.jpg`,sx:{width:25,height:25}})}),e(l,{item:!0,xs:4,children:e("strong",{children:o.value})})]})},{field:"c",headerName:"Current",type:"number",renderCell:o=>o.value.toFixed(2)},{field:"d",headerName:"Chg",type:"number",renderCell:o=>o.value>0?c(l,{container:!0,spacing:1,justifyContent:"space-evenly",alignItems:"center",sx:{color:"success.main"},children:[e(l,{item:!0,xs:3,children:e(O,{})}),e(l,{item:!0,xs:3,children:o.value.toFixed(2)})]}):c(l,{container:!0,spacing:1,justifyContent:"space-evenly",alignItems:"center",sx:{color:"error.main"},children:[e(l,{item:!0,xs:3,children:e(T,{})}),e(l,{item:!0,xs:3,children:o.value.toFixed(2)})]})},{field:"dp",headerName:"Chg%",type:"number",renderCell:o=>o.value>0?c(l,{container:!0,spacing:1,justifyContent:"space-evenly",alignItems:"center",sx:{color:"success.main"},children:[e(l,{item:!0,xs:3,children:e(O,{})}),e(l,{item:!0,xs:3,children:o.value.toFixed(2)})]}):c(l,{container:!0,spacing:1,justifyContent:"space-evenly",alignItems:"center",sx:{color:"error.main"},children:[e(l,{item:!0,xs:3,children:e(T,{})}),e(l,{item:!0,xs:3,children:o.value.toFixed(2)})]})},{field:"h",headerName:"High",type:"number"},{field:"l",headerName:"Low",type:"number"},{field:"o",headerName:"Open",type:"number"},{field:"pc",headerName:"Pclose",type:"number"},{field:" ",width:50,description:"Remove stock from watchlist",sortable:!1,renderCell:o=>e(te,{title:`Remove ${o.row.symbol}`,children:e(R,{size:"small","aria-label":"delete",color:"error",onClick:()=>r(o.row.symbol),children:e(re,{fontSize:"inherit"})})})}],getRowId:o=>o.symbol,hideFooter:!0})})]})};function G(){const{symbol:a}=P();return e(f,{sx:{flexGrow:1,marginBottom:2},children:e(ne,{position:"static",children:c(oe,{children:[e(R,{href:"/stocks-watchlist/",size:"large",edge:"start",color:"inherit",sx:{mr:2},children:e(ae,{})}),e(y,{variant:"h6",component:"div",sx:{flexGrow:1},children:a!=null?a:"Dashboard"})]})})})}const Se=()=>c(g,{children:[e(l,{container:!0,spacing:0,alignItems:"center",justifyContent:"center",children:e(se,{sx:{fontSize:"100px",color:"success"}})}),e(y,{variant:"h3",align:"center",sx:{marginBottom:5},children:"Stock-Watcher"})]}),ke=()=>c(g,{children:[e(G,{}),e(Se,{}),e(ve,{}),e(Ce,{})]}),be=({chartData:a,symbol:r})=>{const[t,u]=d.exports.useState("day"),{day:n,week:i}=a,o={colors:[a[t][0].y<a[t][a[t].length-1].y?"#26C281":"#ed3419"],chart:{id:"stock data",animation:{speed:1300},toolbar:{show:!1},zoom:{enabled:!1}},xaxis:{type:"datetime",labels:{datetimeUTC:!1},tooltip:{x:{format:"dd MMM yyyy"}}},title:{text:void 0}};return c(g,{children:[c(ie,{color:"primary",value:t,onChange:p=>{u(p.target.value)},size:"small",children:[e(W,{value:"day",children:"24H"}),e(W,{value:"week",children:"7D"})]}),e(ce,{options:o,series:[{name:r,data:t==="day"?n:i}],type:"area"})]})},we=({symbol:a})=>{var m,p,v,I,D,M;const r=le(),[t,u]=d.exports.useState(null),[n,i]=d.exports.useState(0),s=t?t.length:0;d.exports.useEffect(()=>{(async()=>{try{const k=F().format("YYYY-MM-DD"),Y=F().subtract(7,"days").format("YYYY-MM-DD"),{data:_}=await x.get("company-news",{params:{symbol:a,from:Y,to:k}});u(_.slice(0,10))}catch(k){console.log(k)}})()},[a]);const o=()=>{i(C=>C+1)},h=()=>{i(C=>C-1)};return t===null?e("h1",{children:"Null"}):c(g,{children:[e(y,{variant:"h3",sx:{my:4,borderBottom:"1px solid grey",p:2},children:"Recent News"}),t.length!==0?c(f,{sx:{maxWidth:800,flexGrow:1,mx:"auto"},children:[e(y,{variant:"h5",children:(m=t[n])==null?void 0:m.headline}),e(f,{component:"img",sx:{height:355,display:"block",maxWidth:800,width:"100%"},src:(p=t[n])==null?void 0:p.image,alt:(v=t[n])==null?void 0:v.headline}),e(f,{sx:{maxWidth:800,width:"100%",p:2},children:(I=t[n])==null?void 0:I.summary}),c(f,{sx:{maxWidth:800,width:"100%",p:2},children:["Source:",e("a",{href:(D=t[n])==null?void 0:D.url,target:"_blank",rel:"noreferrer",children:(M=t[n])==null?void 0:M.source})]}),e(de,{variant:"text",steps:s,position:"static",activeStep:n,nextButton:c($,{size:"small",onClick:o,disabled:n===s-1,children:["Next",r.direction==="rtl"?e(A,{}):e(E,{})]}),backButton:c($,{size:"small",onClick:h,disabled:n===0,children:[r.direction==="rtl"?e(E,{}):e(A,{}),"Back"]})})]}):e("h1",{children:"NO NEWS"})]})},Ie=({symbol:a,currentPrice:r})=>{const[t,u]=d.exports.useState(null);return d.exports.useEffect(()=>{let n=!0;(async()=>{try{const{data:s}=await x.get("/stock/profile2",{params:{symbol:a}});n&&u(s)}catch(s){console.log(s)}})()},[a]),c(g,{children:[t&&c(l,{container:!0,spacing:2,children:[e(l,{item:!0,children:e(B,{alt:`${t.name}-logo`,src:`https://financialmodelingprep.com/image-stock/${a}.jpg`,sx:{width:90,height:90}})}),e(l,{item:!0,xs:12,sm:!0,container:!0,children:e(l,{item:!0,xs:!0,container:!0,direction:"column",children:c(l,{item:!0,xs:!0,children:[c("h1",{children:[t.name," (",t.ticker,")"]}),c("h4",{children:[c("span",{children:["$ ",r," "]}),e("small",{children:t.currency})]})]})})})]}),t&&e(f,{sx:{width:"80%",mx:"auto",my:"1rem"},children:c(l,{container:!0,spacing:4,children:[c(l,{item:!0,xs:"auto",children:[e("strong",{children:"Exchange: "}),t.exchange]}),c(l,{item:!0,children:[e("strong",{children:"Industry: "}),t.finnhubIndustry]}),c(l,{item:!0,children:[e("strong",{children:"IPO: "}),t.ipo]}),c(l,{item:!0,children:[e("strong",{children:"Market Cap: "}),Math.round(+t.marketCapitalization).toLocaleString("en-US")," Million"]}),c(l,{item:!0,children:[e("strong",{children:"Shares Outstanding: "}),Math.round(+t.shareOutstanding).toLocaleString("en-US")," Million"]}),c(l,{item:!0,children:[e("strong",{children:"Website: "}),e("a",{href:t.weburl,children:"Here"})]})]})})]})},De=()=>{const{symbol:a}=P(),[r,t]=d.exports.useState(null),u=n=>n.t.map((i,s)=>({x:i*1e3,y:+n.c[s].toFixed(2)}));return d.exports.useEffect(()=>{(async()=>{try{const i=new Date,s=Math.floor(i.getTime()/1e3),o=i.getDay()===6?2*86400:i.getDay()===0?3*86400:86400,h=7*86400,m=await Promise.all([x.get("/stock/candle",{params:{symbol:a,resolution:60,from:s-o,to:s}}),x.get("/stock/candle",{params:{symbol:a,resolution:"D",from:s-h,to:s}})]);t({day:u(m[0].data),week:u(m[1].data)})}catch(i){console.log(i)}})()},[a]),r===null?e(l,{container:!0,justifyContent:"center",sx:{mt:5},children:e(ue,{size:80,sx:{justifyContent:"center"}})}):c(g,{children:[e(G,{}),c(j,{children:[e(Ie,{symbol:a,currentPrice:r.day.at(-1).y}),e(be,{chartData:r,symbol:a}),e(we,{symbol:a})]})]})};function Me(){return e("main",{children:e(ye,{children:e(he,{children:c(me,{children:[e(z,{path:"/",element:e(ke,{})}),e(z,{path:"/detail/:symbol",element:e(De,{})})]})})})})}const Ne=pe.createRoot(document.getElementById("root"));Ne.render(e(fe.StrictMode,{children:e(Me,{})}));
